<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>muckiglück | Familienbegleitung</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body>
<div class="mobile-bg-fix"></div>
    <!-- Ladeanzeige, während Firebase prüft -->
    <div class="loading-overlay" id="loading-overlay">
        <h1 class="logo">muckiglück</h1>
        <p>Seite wird geladen...</p>
    </div>

    <div id="main-content" style="display: none;">
        <header class="main-header">
            <div class="container">
                <nav class="main-nav" id="main-nav">
                    <ul>
                        <li><a href="https://www.muckiglueck.de">muckiglück</a></li>
                        <li><a href="#about">Über mich</a></li>
                        <li><a href="#services">Leistungen</a></li>
                        <li><a href="#contact">Kontakt</a></li>
                    </ul>
                </nav>
                <div class="user-info">
                    <span class="user-email" id="user-email"></span>
                    <a href="#" class="logout-btn" id="logout-btn">Abmelden</a>
                </div>
                <button class="mobile-nav-toggle" id="mobile-nav-toggle">
                    <i data-lucide="menu"></i>
                </button>
            </div>
        </header>

        <main>
            <!-- Hero Sektion -->
            <section class="hero">
                <div class="hero-content container">
                </div>
            </section>

            <!-- Über Mich Sektion -->
            <section id="about">
                <div class="container">
                    <div class="section-title">
                        <h2>Hallo, ich bin Sophie</h2>
                    </div>
                    <div class="about-grid">
                        <div class="about-image">
                            <img src="images/Sophie.jpg" alt="[Porträtfoto von Sophie]">
                        </div>
                        <div class="about-text">
                            <p>Als Mutter weiß ich, dass der Familienalltag wunderschön, aber auch herausfordernd sein kann. Mit "muckiglück" habe ich es mir zur Aufgabe gemacht, Familien in den verschiedensten Phasen zu unterstützen.</p>
                            <p>Meine Qualifikationen in der Familienbegleitung und diversen Beratungsbereichen ermöglichen es mir, euch fundiertes Wissen und praktische Hilfe an die Hand zu geben – immer auf Augenhöhe, ohne Druck und mit viel Empathie. Mein Ziel ist es, euch zu bestärken, euren eigenen, individuellen Weg zu finden, der sich für euch als Familie richtig anfühlt.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Dienstleistungen Sektion -->
            <section id="services">
                <div class="container">
                    <div class="section-title">
                        <h2>Meine Angebote für Euch</h2>
                        <p>Ich biete euch eine liebevolle und fachkundige Begleitung in verschiedenen Bereichen des Familienlebens. Findet heraus, wie ich euch unterstützen kann.</p>
                    </div>
                    <div class="services-grid">
                        <div class="service-card">
                            <img src="images/Familienbegleitung.jpg" alt="[Bild einer Familie]">
                            <div class="service-card-content">
                                <h3>Familienbegleitung</h3>
                                <p>Vom positiven Schwangerschaftstest bis ins Kleinkindalter – ich begleite euch bei allen Fragen und Unsicherheiten, die diese aufregende Zeit mit sich bringt.</p>
                            </div>
                        </div>
                        <div class="service-card">
                            <img src="images/Schlafberatung.jpg" alt="[Bild eines schlafenden Babys]">
                            <div class="service-card-content">
                                <h3>Schlafberatung</h3>
                                <p>Schlaf ist ein wichtiges Thema für die ganze Familie - und manchmal eine echte Herausforderung. In der Schlafberatung schauen wir gemeinsam auf Eure individuelle Situation, Bedürfnisse und Möglichkeiten.</p>
                            </div>
                        </div>
                        <div class="service-card">
                            <img src="images/Beikost.jpg" alt="[Bild eines Babys beim Essen]">
                            <div class="service-card-content">
                                <h3>
                                    Beikostberatung
                                    <span class="sub-title">(auch vegan)</span>
                                </h3>
                                <p>Wann ist der richtige Zeitpunkt? Wie beginne ich am besten? Was passt zu meinem Kind und zu unserem Alltag? In der Beratung erhältst du fundierte Informationen rund um das Thema Beikost.</p>
                            </div>
                        </div>
                         <div class="service-card">
                            <img src="images/Stillberatung.jpg" alt="[Bild einer Mutter, die ihr Baby stillt]">
                            <div class="service-card-content">
                                <h3>Stillberatung</h3>
                                <p>Individuelle Stillberatung von Stillvorbereitung, Problemen während der Stillzeit bis hin zum bedürfnisorientiertem Abstillen. Für einen guten Start und eine harmonische Stillbeziehung.</p>
                            </div>
                        </div>
                        <div class="service-card">
                            <img src="images/Workshops.jpg" alt="[Bild einer Gruppe von Eltern]">
                            <div class="service-card-content">
                                <h3>Workshops & Vorträge</h3>
                                <p>In meinen Workshops teile ich mein Wissen zu verschiedenen Familienthemen. Eine tolle Möglichkeit, sich zu informieren und mit anderen Eltern auszutauschen.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Kontakt Sektion -->
            <section id="contact">
                <div class="container">
                    <div class="section-title">
                        <h2>Nehmt Kontakt auf</h2>
                        <p>Ich freue mich darauf, von euch zu hören. Schreibt mir eine Nachricht, und ich melde mich so bald wie möglich bei euch.</p>
                    </div>
                    <form class="contact-form" id="contact-form">
                        <input type="text" name="from_name" placeholder="Dein Name" required>
                        <input type="email" name="from_email" placeholder="Deine E-Mail" required>
                        <textarea name="message" placeholder="Deine Nachricht" rows="6" required></textarea>
                        
                        <div class="privacy-consent">
                            <input type="checkbox" id="privacy-check" name="privacy-consent" required>
                            <label for="privacy-check">Ich habe die <a href="https://www.muckiglueck.de/datenschutz">Datenschutzerklärung</a> gelesen und stimme zu.</label>
                        </div>

                        <button type="submit" class="btn btn-primary" id="submit-btn" disabled>Nachricht senden</button>
                    </form>
                    <div id="contact-status" style="margin-top: 15px; text-align: center; font-weight: bold;"></div> </div>
            </section>
        </main>

        <footer class="main-footer">
            <div class="container">
                <p>&copy; 2025 muckiglück</p>
                <div class="footer-links">
                    <a href="https://www.muckiglueck.de/impressum">Impressum</a>
                    <a href="https://www.muckiglueck.de/datenschutz">Datenschutz</a>
                    <a href="https://www.muckiglueck.de/qualifikation">Qualifikation</a>
                </div>
            </div>
        </footer>
    </div>

    <!-- Firebase SDKs -->
    <script type="module">
        // WICHTIG: Ersetzen Sie dies durch Ihre eigene Firebase-Konfiguration
        const firebaseConfig = {
            apiKey: "AIzaSyAlDyv4LGkYFzDWwVwVTpfyxEmpROz115o",
            authDomain: "muckiglueckauth.firebaseapp.com",
            projectId: "muckiglueckauth",
            storageBucket: "muckiglueckauth.firebasestorage.app",
            messagingSenderId: "550834074850",
            appId: "1:550834074850:web:e83a073d702b1fd9e09abb"
        };

        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        const loadingOverlay = document.getElementById('loading-overlay');
        const mainContent = document.getElementById('main-content');
        const userEmailSpan = document.getElementById('user-email');
        const logoutBtn = document.getElementById('logout-btn');
        const mobileNavToggle = document.getElementById('mobile-nav-toggle');
        const mainNav = document.getElementById('main-nav');

        // Listener für den Anmeldestatus
        onAuthStateChanged(auth, (user) => {
            if (user) {
                // Benutzer ist angemeldet, Inhalt anzeigen
                userEmailSpan.textContent = user.email;
                loadingOverlay.classList.add('hidden');
                mainContent.style.display = 'block';
                lucide.createIcons(); // Lucide Icons initialisieren
            } else {
                // Benutzer ist nicht angemeldet, zurück zur Login-Seite
                window.location.href = 'login.html';
            }
        });

        // Logout-Funktion
        logoutBtn.addEventListener('click', (e) => {
            e.preventDefault();
            signOut(auth).catch((error) => {
                console.error('Fehler beim Abmelden:', error);
            });
        });

        // Mobile Navigation
        mobileNavToggle.addEventListener('click', () => {
            mainNav.classList.toggle('active');
            const icon = mobileNavToggle.querySelector('i');
            icon.setAttribute('data-lucide', mainNav.classList.contains('active') ? 'x' : 'menu');
            lucide.createIcons();
        });

        // ------------------- NEU: Checkbox Logik -------------------
        const privacyCheckbox = document.getElementById('privacy-check');
        const submitButton = document.getElementById('submit-btn');

        if (privacyCheckbox && submitButton) {
            privacyCheckbox.addEventListener('change', () => {
                submitButton.disabled = !privacyCheckbox.checked;
            });
        }

        // ------------------- NEU: Google Apps Script Logik -------------------

        const contactForm = document.getElementById('contact-form');
        const contactStatus = document.getElementById('contact-status');
        
        // Fügen Sie hier die URL ein, die Sie bei der Bereitstellung des Skripts kopiert haben.
        const googleScriptURL = 'https://script.google.com/macros/s/AKfycbz-52zOFxYlQoYkJjyf0W6US3eRO-WNIcE01NCim7Q49uEzCKin0Fo_d8ht0l8XuzEr/exec';
        

        contactForm.addEventListener('submit', e => {
            e.preventDefault(); // Verhindert das Neuladen der Seite

            const submitButton = contactForm.querySelector('button[type="submit"]');
            submitButton.disabled = true;
            submitButton.textContent = 'Sende...';
            contactStatus.textContent = '';
            
            // Senden der Formulardaten an das Google Apps Script
            fetch(googleScriptURL, { 
                method: 'POST', 
                body: new FormData(contactForm)
            })
            .then(res => res.json())
            .then(data => {
                if (data.result === 'success') {
                    contactStatus.textContent = 'Vielen Dank! Deine Nachricht wurde erfolgreich gesendet.';
                    contactStatus.style.color = '#8A9A5B';
                    contactForm.reset();
                } else {
                    throw new Error(data.error || 'Unbekannter Fehler');
                }
            })
            .catch(error => {
                contactStatus.textContent = 'Fehler! Deine Nachricht konnte nicht gesendet werden.';
                contactStatus.style.color = '#C04000';
                console.error('Fehler beim Senden:', error);
            })
            .finally(() => {
                submitButton.disabled = false;
                submitButton.textContent = 'Nachricht senden';
            });
        });

    </script>
</body>
</html>
